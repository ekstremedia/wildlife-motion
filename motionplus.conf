; This config file was generated by motionplus 0.2.0-git-20241215-56c6599
; Documentation:  /usr/local/share/doc/motionplus/motionplus_guide.html
;
; This file contains only the basic configuration options to get a
; system working.  There are many more options available.  Please
; consult the documentation for the complete list of all options.
;

;*************************************************
;*****   System
;*************************************************
daemon on
log_file /home/pi/wildlife-motion/logs/motion.log
log_level 6
log_type ALL

;*************************************************
;*****   Camera
;*************************************************
#device_name
#device_id
target_dir /mnt/usbdrive/motion

;*************************************************
;*****   Source
;*************************************************
;v4l2_device /dev/video0
;netcam_url

;*************************************************
;*****   Image
;*************************************************
#width 640
#height 480
framerate 25 

;*************************************************
;*****   Overlays
;*************************************************
#text_right %Y-%m-%d\n%T
text_right %Y-%m-%d\n%T\n%q

;*************************************************
;*****   Method
;*************************************************
emulate_motion off
threshold 1500

;*************************************************
;*****   Masks
;*************************************************
noise_level 32
despeckle_filter EedDl

;*************************************************
;*****   Detection
;*************************************************
minimum_motion_frames 1
event_gap 60
pre_capture 3
post_capture 300

;*************************************************
;*****   Scripts
;*************************************************
on_event_start
on_event_end

;*************************************************
;*****   Picture
;*************************************************
picture_output off
picture_filename %v-%Y%m%d%H%M%S-%q

;*************************************************
;*****   Movie
;*************************************************
movie_output on
movie_max_time 120
#movie_quality 75
movie_container mp4
movie_bps 600000

movie_extpipe_use off
#movie_extpipe ffmpeg -y -f rawvideo -pix_fmt yuv420p -video_size %wx%h -framerate %{fps} -i pipe:0 -vcodec libx264 -preset ultrafast -f mp4 %f.mp4

#movie_extpipe ffmpeg -y -f rawvideo -pix_fmt yuv420p -video_size %wx%h -framerate %{fps} -i pipe:0 -vsync cfr -vcodec libx264 -preset ultrafast -f mp4 %f.mp4

#movie_container mp4:h264_v4l2m2m
movie_filename %Y/%m/%d/noir_%H_%M_%S
on_movie_end /home/pi/wildlife-motion/sendmail.sh %f.mp4

;*************************************************
;*****   Web Control
;*************************************************
webcontrol_port 8080
webcontrol_localhost off
webcontrol_parms 2

;*************************************************
;*****   Web Stream
;*************************************************
stream_preview_scale 75
stream_preview_method combined

;*************************************************
; Device config files - One for each device.
;*************************************************
camera /usr/local/var/lib/motionplus/camera1.conf
; camera /usr/local/var/lib/motionplus/camera2.conf
; camera /usr/local/var/lib/motionplus/camera3.conf
; sound /usr/local/var/lib/motionplus/sound1.conf

;*************************************************
; Directory to read '.conf' files for devices.
;*************************************************
; config_dir /usr/local/var/lib/motionplus/conf.d

mask_file /home/pi/wildlife-motion/noir_mask_converted.pgm
